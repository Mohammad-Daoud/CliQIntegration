<!DOCTYPE html>
<html lang="ar">
<head>
    <title>Avocado pay with CliQ</title>
    <meta charset="UTF-8"/>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="img/favicon/favicon.ico" type="image/x-icon">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Cairo">
    <link rel="stylesheet" href="style.css">
    <script>
        var amount;
        var csrfToken;
        console.log("sending request")
        $.ajax({
            type: "GET",
            url: "CliQIntegration.php",
            success: function (response) {
                // Close the loading popup
                const jsonResponse = JSON.parse(response);
                console.log(jsonResponse);
                console.log(jsonResponse.amount);

                // Assign the value to the amount variable
                amount = jsonResponse.amount;
                csrfToken = jsonResponse.token;
                $('#amount').attr('value', amount);
                $('#amountText').html(amount + " دينار أردني ")
                $('#token').attr('value', csrfToken);
                // Now, you can use the "amount" variable elsewhere in your code
                console.log(amount);
            },
            error: function (xhr, status, error) {
                Swal.fire({
                    title: '',
                    html: '<p>حدث خطأ</p>',
                    confirmButtonColor: '#c72234',
                    confirmButtonText: 'حسناً'
                });
                // Handle errors
                console.error(error);
            }
        });
    </script>
</head>
<body>
<div class="card">
    <img src="img/logo.svg" alt="Avocado">
    <form method="POST" id="paymentForm" action="CliQIntegration.php">
        <input type="hidden" name="amount" id="amount" value="" hidden>
        <input type="hidden" name="token" id="token" value="" wfd-invisible="true">

        <label for="RAliasType"> نوع الاسم المستعار</label>
        <select name="RAliasType" id="RAliasType" required>
            <option selected="selected" value=""> اختيار</option>
            <option value="MOBL">رقم هاتف</option>
            <option value="ALIAS">اسم مستعار</option>
        </select>
        <label for="RAliasValue">الاسم المستعار</label>
        <input type="text" name="RAliasValue" id="RAliasValue" required>
        <p id="amountText"></p>
        <input type="submit" value="ارسال">
    </form>

</div>
<script src="script.js">
</script>
</body>
</html>
